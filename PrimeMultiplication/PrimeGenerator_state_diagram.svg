<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2478px" preserveAspectRatio="none" style="width:1029px;height:2478px;" version="1.1" viewBox="0 0 1029 2478" width="1029px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nkvlu18ob9n3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="16" cy="1234.5" fill="#000000" filter="url(#f1nkvlu18ob9n3)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><ellipse cx="1002" cy="1234.5" fill="none" filter="url(#f1nkvlu18ob9n3)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="1002.5" cy="1235" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="2454.7687" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="895" x="61.5" y="7"/><rect fill="#FFFFFF" height="2403" rx="12.5" ry="12.5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="889" x="64.5" y="55.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="61.5" x2="956.5" y1="52.7687" y2="52.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="61.5" x2="956.5" y1="33.7999" y2="33.7999"/><a href="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L68-L83" target="_top" title="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L68-L83" xlink:actuate="onRequest" xlink:href="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L68-L83" xlink:show="new" xlink:title="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L68-L83" xlink:type="simple"><text fill="#0000FF" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="104" x="457" y="24.9639">MoveNextAsync</text></a><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="222" x="66.5" y="44.9386">Runs the prime generation algorithm.</text><g id="MoveNext.SetCandidateToCurrent"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="64.7374" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="252" x="507.5" y="64.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="759.5" y1="91.5686" y2="91.5686"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="232" x="517.5" y="82.7326">this.candidate = this.current</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="512.5" y="107.7073">Set the proposed next prime to</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="177" x="512.5" y="121.676">the one found last (initially 1).</text></g><g id="MoveNext.ShouldStop"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="92.6749" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="397" x="435" y="166.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="435" x2="832" y1="193.5686" y2="193.5686"/><a href="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L59-L60" target="_top" title="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L59-L60" xlink:actuate="onRequest" xlink:href="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L59-L60" xlink:show="new" xlink:title="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L59-L60" xlink:type="simple"><text fill="#0000FF" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="120" x="573.5" y="184.7326">this.ShouldStop</text></a><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="209" x="440" y="209.7073">Check if the algorithm should stop.</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="440" y="223.676">The algorithm stops if</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="377" x="440" y="237.6448">1. the generator is configured to not throw on cancellation and</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="217" x="440" y="251.6135">2. the token requested cancellation.</text></g><g id="MoveNext.IncrementCandidate"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="50.7687" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="343" x="262" y="350.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="262" x2="605" y1="377.5686" y2="377.5686"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="369.5" y="368.7326">this.candidate++</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="323" x="267" y="393.7073">Increment the proposed next prime so we can test it.</text></g><g id="MoveNext.SetCurrentToNotInitialised"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="64.7374" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="252" x="683.5" y="419.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="683.5" x2="935.5" y1="446.5686" y2="446.5686"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="232" x="693.5" y="437.7326">this.current = NotInitialised</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="688.5" y="462.7073">Reset to uninitialised state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="173" x="688.5" y="476.676">so there is no current prime.</text></g><g id="MoveNext.MoveNextReturnFalse"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="78.7062" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="220" x="696.5" y="1676.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="696.5" x2="916.5" y1="1703.5686" y2="1703.5686"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="758.5" y="1694.7326">return false</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="181" x="701.5" y="1719.7073">The asynchronous stream has</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="200" x="701.5" y="1733.676">been cancelled without throwing,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="179" x="701.5" y="1747.6448">so there are no more primes.</text></g><g id="MoveNext.SetCurrentToCandidate"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="78.7062" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="252" x="453.5" y="1903.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="453.5" x2="705.5" y1="1930.5686" y2="1930.5686"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="232" x="463.5" y="1921.7326">this.current = this.candidate</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="458.5" y="1946.7073">A new candidate has been</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="171" x="458.5" y="1960.676">found proven to be a prime,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172" x="458.5" y="1974.6448">publish it as the current one.</text></g><g id="MoveNext.MoveNextReturnTrue"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="64.7374" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="524.5" y="2171.7687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="524.5" x2="708.5" y1="2198.5686" y2="2198.5686"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="572.5" y="2189.7326">return true</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="529.5" y="2214.7073">Indicate that there are</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="529.5" y="2228.676">more primes in the stream.</text></g><ellipse cx="479.5" cy="97.2687" fill="#000000" filter="url(#f1nkvlu18ob9n3)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><ellipse cx="705.5" cy="2435.7687" fill="none" filter="url(#f1nkvlu18ob9n3)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="706" cy="2436.2687" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="1079.7687" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="720" x="73.5" y="578.7687"/><rect fill="#FFFFFF" height="1028" rx="12.5" ry="12.5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="714" x="76.5" y="627.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="73.5" x2="793.5" y1="624.5374" y2="624.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="73.5" x2="793.5" y1="605.5686" y2="605.5686"/><a href="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L41-L57" target="_top" title="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L41-L57" xlink:actuate="onRequest" xlink:href="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L41-L57" xlink:show="new" xlink:title="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L41-L57" xlink:type="simple"><text fill="#0000FF" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="96" x="385.5" y="596.7326">this.IsPrime</text></a><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="78.5" y="616.7073">Runs the prime test algorithm.</text><g id="MoveNext.IsPrime.Initialise"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="64.7374" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="460" x="171" y="636.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="171" x2="631" y1="663.3373" y2="663.3373"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="440" x="181" y="654.5013">int divisor = 2, limit = (int)Math.Sqrt(this.candidate)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="181" x="176" y="679.476">Set the first non-trivial divisor.</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="330" x="176" y="693.4447">Set the upper limit to the square root of the candidate.</text></g><g id="MoveNext.IsPrime.Check"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="50.7687" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="200" x="301" y="738.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="301" x2="501" y1="765.3373" y2="765.3373"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="337" y="756.5013">divisor &lt;= limit</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="306" y="781.476">See if limit has been reached.</text></g><g id="MoveNext.IsPrime.IsPrimeReturnTrue"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="64.7374" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="203" x="85.5" y="991.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="85.5" x2="288.5" y1="1018.3373" y2="1018.3373"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="143" y="1009.5013">return true</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="183" x="90.5" y="1034.476">Greates divisor doesn't divide</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="174" x="90.5" y="1048.4447">candidate, so this is a prime.</text></g><g id="MoveNext.IsPrime.ThrowIfNeeded"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="92.6749" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="374" x="214" y="880.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="214" x2="588" y1="907.3373" y2="907.3373"/><a href="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L85-L91" target="_top" title="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L85-L91" xlink:actuate="onRequest" xlink:href="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L85-L91" xlink:show="new" xlink:title="https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L85-L91" xlink:type="simple"><text fill="#0000FF" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="160" x="321" y="898.5013">this.ThrowIfNeeded()</text></a><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="219" y="923.476">Throw an exception if required.</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="219" y="937.4447">An exception is thrown if</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="354" x="219" y="951.4135">1. the generator is configured to throw on cancellation and</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="217" x="219" y="965.3822">2. the token requested cancellation.</text></g><g id="MoveNext.IsPrime.Divides"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="50.7687" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="366" x="218" y="1150.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="218" x2="584" y1="1177.3373" y2="1177.3373"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="232" x="285" y="1168.5013">this.candidate % divisor == 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="346" x="223" y="1193.476">Checks if dividing candidate by divisor leaves remainder.</text></g><g id="MoveNext.IsPrime.Increment"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="64.7374" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="323" x="449.5" y="1368.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="449.5" x2="772.5" y1="1395.3373" y2="1395.3373"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="575" y="1386.5013">divisor++</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="280" x="454.5" y="1411.476">This divisor doesn't divide candidate without a</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="303" x="454.5" y="1425.4447">remainder.Increment divisor to check some more.</text></g><g id="MoveNext.IsPrime.IsPrimeReturnFalse"><rect fill="#FEFECE" filter="url(#f1nkvlu18ob9n3)" height="64.7374" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="199" x="227.5" y="1368.5374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="227.5" x2="426.5" y1="1395.3373" y2="1395.3373"/><text fill="#000000" font-family="Courier" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="279" y="1386.5013">return false</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="179" x="232.5" y="1411.476">No remainder, divisor divides</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="178" x="232.5" y="1425.4447">candidate, this is not a prime.</text></g><ellipse cx="143" cy="669.0374" fill="#000000" filter="url(#f1nkvlu18ob9n3)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><ellipse cx="233" cy="1632.5374" fill="none" filter="url(#f1nkvlu18ob9n3)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="233.5" cy="1633.0374" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><!--MD5=[d65436900ea131f76765fec81c7f057b]
link *start*IsPrime to Initialise--><path d="M153.0781,669.0374 C157.3706,669.0374 161.663,669.0374 165.9554,669.0374 " fill="none" id="*start*IsPrime-&gt;Initialise" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="170.9944,669.0374,161.9944,665.0374,165.9944,669.0374,161.9944,673.0374,170.9944,669.0374" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a8d7c5563e59d293028eb0561c927d47]
link Initialise to Check--><path d="M401,701.7824 C401,711.9994 401,723.2754 401,733.3394 " fill="none" id="Initialise-&gt;Check" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="401,738.4794,405,729.4794,401,733.4794,397,729.4794,401,738.4794" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fbb2efe28cee0c260f647f57ab217f34]
link Check to ThrowIfNeeded--><path d="M401,789.8404 C401,812.5104 401,846.7384 401,875.2084 " fill="none" id="Check-&gt;ThrowIfNeeded" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="401,880.4534,405,871.4534,401,875.4534,397,871.4534,401,880.4534" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="402" y="839.6042">true</text><!--MD5=[56a9f65bb86cf78cc8254be67cd34483]
link Check to IsPrimeReturnTrue--><path d="M327.275,789.6334 C284.485,807.8604 233.549,837.1494 205,880.5374 C184.3982,911.8474 181.7832,955.5144 183.1358,986.2344 " fill="none" id="Check-&gt;IsPrimeReturnTrue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="183.4076,991.4314,186.9316,982.2345,183.1462,986.4382,178.9425,982.6528,183.4076,991.4314" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="260" y="839.6042">false</text><!--MD5=[7bedc6391e1b22af468c9803b29587b3]
link ThrowIfNeeded to Divides--><path d="M401,973.6284 C401,1023.7254 401,1102.7294 401,1145.3754 " fill="none" id="ThrowIfNeeded-&gt;Divides" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="401,1150.3914,405,1141.3914,401,1145.3914,397,1141.3914,401,1150.3914" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[421433f95066a9ccdbba06d9b09304f0]
link IsPrimeReturnTrue to *end*IsPrime--><path d="M188.312,1056.7484 C188.689,1068.3244 189,1081.5214 189,1093.5374 C189,1093.5374 189,1093.5374 189,1585.5374 C189,1603.4508 206.64,1617.1216 219.582,1624.7406 " fill="none" id="IsPrimeReturnTrue-&gt;*end*IsPrime" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="224.096,1627.2704,218.2002,1619.3811,219.7342,1624.826,214.2893,1626.36,224.096,1627.2704" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f6c56dee9bf5144ca6448831c0735e90]
link Divides to IsPrimeReturnFalse--><path d="M381.464,1201.6064 C374.801,1212.3214 369,1225.4184 369,1238.5374 C369,1238.5374 369,1238.5374 369,1331.5374 C369,1342.9084 364.742,1353.9834 358.937,1363.7974 " fill="none" id="Divides-&gt;IsPrimeReturnFalse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="356.17,1368.2154,364.3377,1362.7118,358.8244,1363.9781,357.558,1358.4648,356.17,1368.2154" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="370" y="1289.6042">true</text><!--MD5=[fdc5509e1ee1d59477c23ee7eae8918d]
link Divides to Increment--><path d="M456.141,1201.6554 C468.483,1210.9674 478,1223.1394 478,1238.5374 C478,1238.5374 478,1238.5374 478,1331.5374 C478,1345.1734 483.594,1356.0974 492.487,1364.8474 " fill="none" id="Divides-&gt;Increment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="496.493,1368.4664,492.4958,1359.4651,492.7827,1365.1147,487.1331,1365.4015,496.493,1368.4664" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="479" y="1289.6042">false</text><!--MD5=[57816b8b24e3af26ed752578e9fe954a]
link Increment to Check--><path d="M614.279,1368.3564 C615.222,1356.7834 616,1343.5804 616,1331.5374 C616,834.0374 616,834.0374 616,834.0374 C616,808.5894 560.701,791.2064 506.193,780.2534 " fill="none" id="Increment-&gt;Check" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="501.261,779.2794,509.3142,784.9491,506.166,780.2492,510.866,777.1011,501.261,779.2794" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aa76a7203948780d195e032284db17fe]
link IsPrimeReturnFalse to *end*IsPrime--><path d="M291.731,1433.6784 C283.458,1444.3354 277,1456.9914 277,1470.5374 C277,1470.5374 277,1470.5374 277,1585.5374 C277,1603.4508 259.36,1617.1216 246.418,1624.7406 " fill="none" id="IsPrimeReturnFalse-&gt;*end*IsPrime" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="241.904,1627.2704,251.7107,1626.36,246.2658,1624.826,247.7998,1619.3811,241.904,1627.2704" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c22c610c1858f226063ce818fa3876a4]
link *start*MoveNext to SetCandidateToCurrent--><path d="M489.727,97.2687 C493.873,97.2687 498.019,97.2687 502.165,97.2687 " fill="none" id="*start*MoveNext-&gt;SetCandidateToCurrent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="507.417,97.2687,498.417,93.2687,502.417,97.2687,498.417,101.2687,507.417,97.2687" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0c8c844ee5fd2b0d01d5cdd931771d08]
link SetCandidateToCurrent to ShouldStop--><path d="M633.5,130.0287 C633.5,139.7587 633.5,150.7287 633.5,161.4087 " fill="none" id="SetCandidateToCurrent-&gt;ShouldStop" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="633.5,166.6287,637.5,157.6287,633.5,161.6287,629.5,157.6287,633.5,166.6287" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f5552c99ce5a6dde8c16a35b7a78a7a3]
link ShouldStop to SetCurrentToNotInitialised--><path d="M667.435,259.9687 C701.139,305.3487 752.118,373.9987 782.966,415.5387 " fill="none" id="ShouldStop-&gt;SetCurrentToNotInitialised" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="786.072,419.7187,783.9104,410.11,783.088,415.7067,777.4913,414.8843,786.072,419.7187" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="707.5" y="309.8356">true</text><!--MD5=[3a3e0771c00dc75063d81a910652fab1]
link ShouldStop to IncrementCandidate--><path d="M576.723,259.9787 C541.687,288.1787 497.886,323.4387 468.008,347.4887 " fill="none" id="ShouldStop-&gt;IncrementCandidate" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="464.07,350.6587,473.5904,348.1365,467.9667,347.5256,468.5776,341.9019,464.07,350.6587" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="530.5" y="309.8356">false</text><!--MD5=[8d175ebcbe36899752e64c103f2de710]
link IncrementCandidate to IsPrime--><path d="M433.5,401.9087 C433.5,434.8687 433.5,498.0487 433.5,573.7587 " fill="none" id="IncrementCandidate-&gt;IsPrime" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="433.5,578.7687,437.5,569.7687,433.5,573.7687,429.5,569.7687,433.5,578.7687" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[5e29f04804e738dcf8022e3c71838461]
link SetCurrentToNotInitialised to MoveNextReturnFalse--><path d="M809.425,484.7787 C809.018,655.8187 807.077,1472.3627 806.604,1671.4307 " fill="none" id="SetCurrentToNotInitialised-&gt;MoveNextReturnFalse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="806.592,1676.5797,810.6126,1667.5888,806.6034,1671.5797,802.6126,1667.5706,806.592,1676.5797" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a95ce100d799b6cd18660d3e740a4f85]
link IsPrime to SetCurrentToCandidate--><path d="M545.322,1659.1047 C548.614,1697.7727 550.5,1736.2817 550.5,1773.7687 C550.5,1773.7687 550.5,1773.7687 550.5,1866.7687 C550.5,1877.5077 553.089,1888.5697 556.719,1898.8017 " fill="none" id="IsPrime-&gt;SetCurrentToCandidate" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="558.578,1903.7537,559.1602,1893.922,556.821,1899.0726,551.6705,1896.7333,558.578,1903.7537" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="551.5" y="1824.8356">true</text><!--MD5=[32ee02d317cba26cd561ee7894b5a3b0]
link IsPrime to ShouldStop--><path d="M632.325,578.4687 C633.096,566.1887 633.5,553.9387 633.5,541.7687 C633.5,304.2687 633.5,304.2687 633.5,304.2687 C633.5,291.5787 633.5,277.8787 633.5,265.0987 " fill="none" id="IsPrime-&gt;ShouldStop" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="633.5,260.0587,629.5,269.0587,633.5,265.0587,637.5,269.0587,633.5,260.0587" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="634.5" y="456.8356">false</text><!--MD5=[4ab5f89f2882690578570794246fe73a]
link SetCurrentToCandidate to MoveNextReturnTrue--><path d="M588.74,1982.8467 C590.857,1994.6267 592.5,2007.6657 592.5,2019.7687 C592.5,2019.7687 592.5,2019.7687 592.5,2134.7687 C592.5,2145.4897 595.151,2156.6497 598.69,2166.7747 " fill="none" id="SetCurrentToCandidate-&gt;MoveNextReturnTrue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="600.492,2171.6547,601.1275,2161.8263,598.7604,2166.9641,593.6226,2164.597,600.492,2171.6547" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[39691a0243df17fb6f783ff1eabd79ba]
link MoveNextReturnTrue to *end*MoveNext--><path d="M649.398,2236.9027 C657.297,2247.6477 663.5,2260.3557 663.5,2273.7687 C663.5,2273.7687 663.5,2273.7687 663.5,2388.7687 C663.5,2406.2978 680.338,2420.0709 692.692,2427.8167 " fill="none" id="MoveNextReturnTrue-&gt;*end*MoveNext" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="697.001,2430.3936,691.331,2422.3406,692.7102,2427.8267,687.224,2429.2059,697.001,2430.3936" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9dcd93f22640615df299f9b72cc60146]
link MoveNextReturnFalse to *end*MoveNext--><path d="M762.245,1756.1067 C754.307,1766.9057 748.5,1779.3807 748.5,1792.7687 C748.5,1792.7687 748.5,1792.7687 748.5,2388.7687 C748.5,2406.4888 731.261,2420.211 718.613,2427.8938 " fill="none" id="MoveNextReturnFalse-&gt;*end*MoveNext" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="714.202,2430.4473,723.9949,2429.3989,718.5289,2427.9418,719.9861,2422.4758,714.202,2430.4473" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0d1d25f96b98a24fe345bb128cae812a]
link *start to MoveNext--><path d="M26.1104,1234.5 C36.1497,1234.5 46.189,1234.5 56.2283,1234.5 " fill="none" id="*start-&gt;MoveNext" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="61.4782,1234.5,52.4782,1230.5,56.4782,1234.5,52.4782,1238.5,61.4782,1234.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2377ff72d254a28fc56a5a739bb59a71]
link MoveNext to *end--><path d="M956.744,1234.5 C966.68,1234.5 976.615,1234.5 986.551,1234.5 " fill="none" id="MoveNext-&gt;*end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="991.747,1234.5,982.747,1230.5,986.747,1234.5,982.747,1238.5,991.747,1234.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[38cf86fab5ab1616befd89497ec21589]
@startuml
hide empty description
	skinparam StateFontName Courier

	state "[[https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L68-L83 MoveNextAsync]]" as MoveNext {
		state "this.candidate = this.current" as SetCandidateToCurrent
		state "[[https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L59-L60 this.ShouldStop]]" as ShouldStop
		state "this.candidate++" as IncrementCandidate
		state "this.current = NotInitialised" as SetCurrentToNotInitialised 
		state "return false" as MoveNextReturnFalse
		state "this.current = this.candidate" as SetCurrentToCandidate
		state "return true" as MoveNextReturnTrue
		state "[[https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L41-L57 this.IsPrime]]" as IsPrime {
			state "int divisor = 2, limit = (int)Math.Sqrt(this.candidate)" as Initialise
			state "divisor <= limit" as Check
			state "return true" as IsPrimeReturnTrue
			state "[[https://github.com/langsamu/PrimeMultiplication/blob/a644cba37b9566532961a27a0fd03086a2b03145/PrimeMultiplication/PrimeGenerator.AsyncEnumerator.cs#L85-L91 this.ThrowIfNeeded()]]" as ThrowIfNeeded
			state "this.candidate % divisor == 0" as Divides
			state "divisor++" as Increment
			state "return false" as IsPrimeReturnFalse

			Initialise : Set the first non-trivial divisor.
			Initialise : Set the upper limit to the square root of the candidate.
			Check : See if limit has been reached.
			IsPrimeReturnTrue : Greates divisor doesn't divide
			IsPrimeReturnTrue : candidate, so this is a prime.
			ThrowIfNeeded : Throw an exception if required.
			ThrowIfNeeded : An exception is thrown if
			ThrowIfNeeded : 1. the generator is configured to throw on cancellation and
			ThrowIfNeeded : 2. the token requested cancellation.
			Divides : Checks if dividing candidate by divisor leaves remainder.
			IsPrimeReturnFalse : No remainder, divisor divides
			IsPrimeReturnFalse : candidate, this is not a prime.
			Increment : This divisor doesn't divide candidate without a
			Increment :  remainder.Increment divisor to check some more.

			[*]                ->      Initialise
			Initialise         - ->     Check
			Check              - - ->    ThrowIfNeeded : true
			Check              - - ->    IsPrimeReturnTrue : false
			ThrowIfNeeded      - - - ->   Divides
			IsPrimeReturnTrue  - - - ->   [*]
			Divides            - - - - ->  IsPrimeReturnFalse : true
			Divides            - - - - ->  Increment : false
			Increment          - - - - - -> Check
			IsPrimeReturnFalse - - - - - -> [*]
		}

		SetCandidateToCurrent : Set the proposed next prime to
		SetCandidateToCurrent : the one found last (initially 1).
		ShouldStop : Check if the algorithm should stop.
		ShouldStop : The algorithm stops if
		ShouldStop : 1. the generator is configured to not throw on cancellation and
		ShouldStop : 2. the token requested cancellation.
		IncrementCandidate : Increment the proposed next prime so we can test it.
		SetCurrentToNotInitialised : Reset to uninitialised state
		SetCurrentToNotInitialised : so there is no current prime.
		MoveNextReturnFalse : The asynchronous stream has
		MoveNextReturnFalse : been cancelled without throwing,
		MoveNextReturnFalse : so there are no more primes.
		SetCurrentToCandidate : A new candidate has been 
		SetCurrentToCandidate : found proven to be a prime,
		SetCurrentToCandidate : publish it as the current one.
		MoveNextReturnTrue : Indicate that there are
		MoveNextReturnTrue : more primes in the stream.
		IsPrime : Runs the prime test algorithm.
		
		[*]                        ->       SetCandidateToCurrent
		SetCandidateToCurrent      - ->      ShouldStop
		ShouldStop                 - - ->     SetCurrentToNotInitialised : true
		ShouldStop                 - - ->     IncrementCandidate : false
		IncrementCandidate         - - - ->    IsPrime
		SetCurrentToNotInitialised - - - ->    MoveNextReturnFalse
		IsPrime                    - - - - ->   SetCurrentToCandidate : true
		IsPrime                    - - - - ->   ShouldStop : false
		SetCurrentToCandidate      - - - - - ->  MoveNextReturnTrue
		MoveNextReturnTrue         - - - - - ->  [*]
		MoveNextReturnFalse        - - - - - - -> [*]
	}

	MoveNext : Runs the prime generation algorithm.

	[*]      -> MoveNext
	MoveNext -> [*]
@enduml

PlantUML version 1.2020.13(Sat Jun 13 12:26:38 UTC 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>